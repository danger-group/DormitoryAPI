# 高専共通寮通知API(仮)  

[![hackmd-github-sync-badge](https://hackmd.io/FMOkh4kFSUGuETi4XaJOtA/badge)](https://hackmd.io/FMOkh4kFSUGuETi4XaJOtA)

 
**荒らしたら…分かっていますね？**  
 
# ***† 粛 清 †***  

んで  

### あらずじ  
 
lammineさんが8月終了間際に無法地帯に投げたやつ  
ネーミングはカス←Nanai10a  
投げたのはぬーべすとさんだった希ガス  
lammineさんが高専寮の風呂, 食堂, 洗濯機, 乾燥機などの使用状況や通知を送れるAPIを作りたいというところから来た。  
んでNanai10aが高専共通にして汎用化すればめっちゃ便利になるんじゃね？と投げたところまで。  

## 仕様  

### 決めること  
通知をなにでするのか  
* LINEなのかディスコードなのかはたまた専用のページを作るのか  
何を通知するか  
サーバをどうするのか  
* 問い合わせるサーバーがいるがそこらへんをどうするか  

### Nanai10aいわく(なぐり書き)

私は何でもかんでもマルチプラットフォームと可移植性を考えることが好きなので...
すぐそういう事をします

んで割とありそうだなという環境は
- アプリ(iOS/Android)
- DiscordBot
- LINEbot
- Web

くらいだろうか

んでクライアント側から出来ること

- 情報の通知
- 通知の受信
- 過去通知の閲覧

サーバー側がすること

- 情報の管理(DB)

かなぁ？

んでここで懸念されること

- 通知可能な人を絞らない場合、悪意のある通知が飛ぶ可能性がある

んでこれは通知送信ををセンサーからに限定させればどうにかなる(一応)  
けど任意の人からの通知を必要とする場面があるはず、通知にアカウントを紐付けるとかで予防はできるかも知れないけど、あまりクライアントに制限はかけたくない(独裁の可能性)  

※そんなこと考えなければ良いと言えばそう  
でも開発する以上運用時に生じる問題は考えたいよなぁという部分

んでここで鯖側のお話  
この場合鯖はDBになるわけだけど、これをこちら側(プロジェクト管理者→我々)で管理をすると  

- ユーザーの手軽さ  

という部分でよろしい  
しかしこの場合こちら側に

- 情報管理の責任
- 鯖管理費用の発生
- メンテナンス等によるサービス全体への影響の発生

など色々問題が生じる  
もちろんユーザー側の苦労をこっちで肩代わりしている訳だが、その分こちらの不手際で起きる問題が大きい
人間による通知のみなど簡易的な運用であればまだ良いが、大きなシステムとしての導入を考えると影響を与えるのはあまりよろしくない

ここは議題点。

んでクライアント側  
これは2パターン考えられる  

- 人間が使用する部分
- センサーなどが使用する部分

まずセンサー

センサーは通知ができれば良い  
通知を送信する機能だけがあるクライアントアプリを作ればよい

ただこれ要らない場合もある  
人間の方みたいにデータを受信して動作を変更するものがあれば人間の方を使ってしまえばこちらがある必要はない  

機能ごとにコンポーネントで分割してしまえば良いかなといえばそうかもしれない  
そうすればやりたい人がやりたいようにできる

んで人間の方

これは送信と受信が兼ねている必要がある  
んでこれは様々な環境での動作が想定される

- Webアプリ
- Android/iOSアプリ
- LINE/Discord Bot

まぁこれに関しては前から言われていた部分

### Nanai10aいわく(まとめ)

- 可移植性を重視したい
- センサーなどの機器での運用を想定し、簡潔かつ柔軟な運用ができるようにする

#### DB

- 鯖立てをこちらでやるのか各ユーザー群に委ねるのかどうか(議題点)

- 保持する情報
    - 通知内容
    - 日時
    - 通知者


#### クライアント

- 出来ること
    - 通知の送信
    - 通知の受信
    - 過去通知履歴の閲覧
- 想定される環境
    - Webアプリ
    - Android/iOSアプリ
    - LINE/Discord Bot
    - センサーを装着したマイコン等

- 通知の受信<=>履歴との照合 にするのかどうか(議題点)
- 機能ごとに細かくコンポーネントで分割するのか(議題点)

こんなところです。

### 未定



### 確定


